!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("Rx"),require("Rx.Scheduler")):"function"==typeof define&&define.amd?define(["Rx","Rx.Scheduler"],t):"object"==typeof exports?exports.RxUI=t(require("Rx"),require("Rx.Scheduler")):e.RxUI=t(e.Rx,e["Rx.Scheduler"])}(this,function(e,t){return function(e){function t(n){if(r[n])return r[n].exports;var o=r[n]={exports:{},id:n,loaded:!1};return e[n].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var r={};return t.m=e,t.c=r,t.p="",t(0)}([function(e,t,r){"use strict";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}n(r(3)),n(r(4)),n(r(19)),n(r(20)),n(r(7)),n(r(16)),n(r(18)),n(r(8)),n(r(6))},,function(e,t){e.exports=Rx},function(e,t,r){"use strict";var n=r(2),o=r(4),i=r(6),u=function(){function e(e){var t=this;if(this._propertyChanged=new n.Subject,this.__data={},e)if(Array.isArray(e))e.forEach(function(e){return t.setupProperty(e,null)});else if("object"==typeof e)for(var r in e)if(e.hasOwnProperty(r)){var o=e[r];this.setupProperty(r,o)}}return e.prototype.setupProperty=function(e,t){var r=this;this.hasOwnProperty(e)||(Object.defineProperty(this,e,{configurable:!0,enumerable:!1,get:function(){return r.get(e)},set:function(t){return r.set(e,t)}}),this.set(e,t))},Object.defineProperty(e.prototype,"propertyChanged",{get:function(){return this._propertyChanged},enumerable:!0,configurable:!0}),e.prototype.createPropertyChangedEventArgs=function(e,t){return new o.PropertyChangedEventArgs(this,e,t)},e.prototype.emitPropertyChanged=function(e,t){var r=null!=t?t:this.get(e);this._propertyChanged.next(this.createPropertyChangedEventArgs(e,r))},e.prototype.emitIfPropertyChanged=function(t,r){var n=e.get(this,t);n!==r&&this.emitPropertyChanged(t,n)},e.prototype.trackPropertyChanges=function(t,r){var n=e.get(this,t),o=r();return this.emitIfPropertyChanged(t,n),o},e.getSingleProperty=function(t,r){return"undefined"==typeof t[r]&&t instanceof e?e.getReactiveProperty(t,r):t[r]},e.getReactiveProperty=function(e,t){var r=e.__data[t];return"undefined"==typeof r?null:r},e.getDeepProperty=function(t,r){var n=r.children[0],o=r.property.substring(n.length+1),i=e.get(t,n);return"undefined"!=typeof i?null!==i?e.get(i,o):null:void 0},e.get=function(t,r){var n=e.evaluateLambdaOrString(t,r);return 1===n.children.length?e.getSingleProperty(t,n.property):e.getDeepProperty(t,n)},e.prototype.get=function(t){var r=e.evaluateLambdaOrString(this,t);return 1===r.children.length?e.getReactiveProperty(this,r.property):e.getDeepProperty(this,r)},e.setSingleProperty=function(t,r,n){"undefined"==typeof t[r]&&t instanceof e?e.setReactiveProperty(t,r,n):t[r]=n},e.setReactiveProperty=function(e,t,r){var n=e,o=n.__data[t];r!==o&&(n.__data[t]=r,n.emitPropertyChanged(t,r))},e.setDeepProperty=function(t,r,n){var o=r.children[0],i=r.property.substring(o.length+1),u=e.get(t,o);if(null===u)throw new Error("Null Reference Exception. Cannot set a child property on a null or undefined property of this object.");e.set(u,i,n)},e.traverse=function(t,r,n,o){var i=e.evaluateLambdaOrString(t,r);1===i.children.length?n(i):o(i)},e.set=function(t,r,n){e.traverse(t,r,function(r){e.setSingleProperty(t,r.property,n)},function(r){e.setDeepProperty(t,r,n)})},e.prototype.set=function(t,r){var n=this;e.traverse(this,t,function(t){e.setReactiveProperty(n,t.property,r)},function(t){e.setDeepProperty(n,t,r)})},e.buildGhostObject=function(e){function t(){return new Proxy({},{get:function(r,n,o){return e.push(n),t()}})}return"undefined"!=typeof Proxy?t():null},e.evaluateLambdaExpression=function(t,r){var n=[],o=e.buildGhostObject(n);return o?r(o):e.evaluateLambdaErrors(n,r),n.join(".")},e.evaluateLambdaErrors=function(t,r,n){void 0===n&&(n=null);try{r(n)}catch(o){if(o instanceof TypeError){var i=o,u=null,a=/property\s+'(\w+)'/g.exec(i.message);if(a&&(u=a[1]),u||(a=/evaluating \'([\w]+\.?)+\'/g.exec(i.message),a&&(u=a[a.length-1])),u){t.push(u),n=n||{};var s=n;return t.forEach(function(e,r){s[e]=r<t.length-1?{}:null,s=s[e]}),void e.evaluateLambdaErrors(t,r,n)}}throw o}},e.evaluateLambdaOrString=function(t,r){var n;n="function"==typeof r?e.evaluateLambdaExpression(t,r):r;var o=n.split(".");return{children:o,property:n}},e.whenSingleProp=function(t,r,o){if(void 0===o&&(o=!1),t instanceof e){var i=t,u=i.propertyChanged.filter(function(e){return e.propertyName==r});return o?n.Observable.of(i.createPropertyChangedEventArgs(r,i.get(r))).concat(u):u}if(t.__viewBindingHelper){var a=t.__viewBindingHelper;return n.Observable.create(function(e){return a.observeProp(t,r,o,function(t){e.next(t)})})}throw new Error("Unable to bind to objects that do not inherit from ReactiveObject or provide __viewBindingHelper")},e.whenSingle=function(t,r,o){void 0===o&&(o=!1);var i=e.evaluateLambdaOrString(t,r),u=i.children,a=i.property;if(1===u.length)return e.whenSingleProp(t,a,o);var s=u[0],c=a.substring(s.length+1),p=0;return e.whenSingleProp(t,s,!0).map(function(t){var r=t.newPropertyValue;return p++,r?e.whenSingle(r,c,o||p>1):o?n.Observable.of(t):n.Observable.empty()})["switch"]()},e.prototype.whenSingle=function(t,r){return void 0===r&&(r=!1),e.whenSingle(this,t,r)},e.prototype.whenAny=function(){function e(t){t.forEach(function(t,r){var n=typeof t;"string"===n||"function"===n?i.push(t):Array.isArray(t)&&e(t)})}for(var t=this,r=[],o=0;o<arguments.length;o++)r[o-0]=arguments[o];var i=[],u=this.getMapFunction(r);e(u?r.slice(0,r.length-1):r);var a=i.map(function(e){return t.whenSingle(e,!0)}).filter(function(e){return null!=e});return u?n.Observable.combineLatest.apply(n.Observable,a.concat([u])):n.Observable.combineLatest.apply(n.Observable,a.concat([function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return 1==e.length?e[0]:e}]))},e.prototype.getMapFunction=function(e){var t=null,r=e[e.length-1];return e.length>1&&"function"==typeof r&&(t=r),t},e.prototype.whenAnyValue=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];var r=this.getMapFunction(e),n=r?e.slice(0,e.length-1):e,o=this.whenAny.bind(this);return o.apply(void 0,n.concat([function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];var n=e.map(function(e){return e.newPropertyValue});return r?r.apply(void 0,n):1==n.length?n[0]:n}]))},e.prototype.mergeChanges=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return n.Observable.merge.apply(n.Observable,e).distinctUntilChanged(function(e,t){return e===t},function(e){return e.value})},e.prototype.bind=function(t,r,n,o){var i=this,u=e.whenSingle(t,n).map(function(e){return{fromVm:!1,value:e.newPropertyValue}}),a=this.whenAny(r).map(function(e){return{fromVm:!0,value:e.newPropertyValue}}),s=this.mergeChanges(u,a).startWith({fromVm:!0,value:this.get(r)});return s.subscribe(function(o){o.fromVm?e.set(t,n,o.value):i.set(r,o.value)})},e.prototype.oneWayBind=function(t,r,n,o){var i=this.whenAny(r).map(function(e){return{fromVm:!0,value:e.newPropertyValue}}),u=this.mergeChanges(i).startWith({fromVm:!0,value:this.get(r)});return o&&(u=u.observeOn(o)),u.subscribe(function(r){r.fromVm&&e.set(t,n,r.value)})},e.bindObservable=function(t,r,n,o){var i=t.distinctUntilChanged();return o&&(i=i.observeOn(o)),i.subscribe(function(t){e.set(r,n,t)})},e.prototype.when=function(e){return"string"==typeof e?this.whenSingle(e,!0).map(function(e){return e.newPropertyValue})["switch"]():e},e.prototype.invokeCommandWhen=function(e,t){return i.invokeCommand(this.when(e),this,t)},e.prototype.toProperty=function(t,r,n){return e.bindObservable(t,this,r,n)},e.prototype.toJSON=function(){return e.clone(this.__data)},e.prototype.toString=function(){return JSON.stringify(this)},e.keys=function(t){return t instanceof e?Object.keys(t.__data):Object.keys(t)},e.clone=function(e){var t={};for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);return t},e}();t.ReactiveObject=u},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},o=r(5),i=function(e){function t(t,r,n){e.call(this,t),this._propertyName=r,this._newPropertyValue=n}return n(t,e),Object.defineProperty(t.prototype,"propertyName",{get:function(){return this._propertyName},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"newPropertyValue",{get:function(){return this._newPropertyValue},enumerable:!0,configurable:!0}),t}(o.EventArgs);t.PropertyChangedEventArgs=i},function(e,t){"use strict";var r=function(){function e(e){this._sender=e}return Object.defineProperty(e.prototype,"sender",{get:function(){return this._sender},enumerable:!0,configurable:!0}),e}();t.EventArgs=r},function(e,t,r){"use strict";function n(e,t,r){var n,i;"string"==typeof r?(n=t.whenSingle(r,!0).map(function(e){return e.newPropertyValue}),i=n.map(function(e){return e.canExecute})["switch"]()):(n=o.Observable.of(r),i=r.canExecute);var u=e.withLatestFrom(n,i,function(e,t,r){return{canExecute:r,command:t,observedValue:e}}).filter(function(e){return e.canExecute&&null!=e.command}).distinctUntilChanged().flatMap(function(e){return e.command.execute(e.observedValue)});return u}var o=r(2);t.invokeCommand=n},function(e,t,r){"use strict";var n=r(2),o=r(8),i=function(){function e(e,t,r){var o=this;if(this.task=e,this.canRun=t,this.scheduler=r,!e)throw new Error("The task parameter must be supplied");if(!t)throw new Error("The canRun parameter must be supplied");if(!r)throw new Error("The scheduler parameter must be supplied");this._executionInfo=new n.Subject,this._synchronizedExcecutionInfo=this._executionInfo,this._exceptions=new n.Subject,this._isExecuting=this._synchronizedExcecutionInfo.observeOn(r).map(function(e){return e.demarcation===u.Begin}).startWith(!1).distinctUntilChanged().publishReplay(1).refCount(),this._canExecute=this.canRun["catch"](function(e){return o._exceptions.next(e),n.Observable.of(!1)}).startWith(!1).combineLatest(this._isExecuting,function(e,t){return e&&!t}).distinctUntilChanged().publishReplay(1).refCount(),this._results=this._synchronizedExcecutionInfo.observeOn(r).filter(function(e){return e.demarcation===u.EndWithResult}).map(function(e){return e.result}),this._canExecuteSubscription=this._canExecute.subscribe()}return Object.defineProperty(e.prototype,"isExecuting",{get:function(){return this._isExecuting},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"canExecute",{get:function(){return this._canExecute},enumerable:!0,configurable:!0}),e.defaultScheduler=function(e){return e||o.RxApp.mainThreadScheduler},e.defaultCanRun=function(e){return e||n.Observable.of(!0)},e.create=function(t,r,o){return new e(function(e){var r=t(e);return"undefined"!=typeof r?n.Observable.of(r):n.Observable.of(null)},e.defaultCanRun(r),e.defaultScheduler(o))},e.createFromTask=function(t,r,o){return new e(function(e){return n.Observable.fromPromise(t(e))},e.defaultCanRun(r),e.defaultScheduler(o))},e.createFromObservable=function(t,r,n){return new e(t,e.defaultCanRun(r),e.defaultScheduler(n))},e.prototype.execute=function(e){var t=this;void 0===e&&(e=null);try{return n.Observable.defer(function(){return t._synchronizedExcecutionInfo.next(a.createBegin()),n.Observable.empty()}).concat(this.task(e))["do"](function(e){return t._synchronizedExcecutionInfo.next(a.createResult(e))},null,function(){return t._synchronizedExcecutionInfo.next(a.createEnded())})["catch"](function(e){return t._synchronizedExcecutionInfo.next(a.createFail()),t._exceptions.next(e),n.Observable["throw"](e)}).publishLast().refCount()}catch(r){return this._exceptions.next(r),n.Observable["throw"](r)}},e.prototype.invoke=function(e){var t=this;return void 0===e&&(e=null),this.canExecuteNow().filter(function(e){return e}).flatMap(function(r){return t.execute(e)})},e.prototype.canExecuteNow=function(){return this.canExecute.first()},Object.defineProperty(e.prototype,"results",{get:function(){return this._results},enumerable:!0,configurable:!0}),e}();t.ReactiveCommand=i;var u,a=function(){function e(e,t){this.demarcation=e,this.result=t}return e.createBegin=function(){return new e(u.Begin,null)},e.createResult=function(t){return new e(u.EndWithResult,t)},e.createFail=function(){return new e(u.EndWithException,null)},e.createEnded=function(){return new e(u.Ended,null)},e}();!function(e){e[e.Begin=0]="Begin",e[e.EndWithResult=1]="EndWithResult",e[e.EndWithException=2]="EndWithException",e[e.Ended=3]="Ended"}(u||(u={}))},function(e,t,r){"use strict";var n=r(9),o=r(9),i={asap:n.asap,queue:o.queue},u=function(){function e(){}return e}();t.RxApp=u,u.mainThreadScheduler=i.queue,u.immediateScheduler=i.asap},function(e,t){e.exports=Rx.Scheduler},,,,,,,function(e,t,r){"use strict";var n=r(2),o=function(){function e(){this._handlerChain=[]}return e.prototype.registerHandler=function(e){var t=this;if(!e)throw Error("Null or undefined handlers cannot be registered. Pass in a valid handler function to properly register it.");return this._handlerChain.unshift(e),new n.Subscription(function(){var r=t._handlerChain.indexOf(e);r>=0&&t._handlerChain.splice(r,1)})},e.prototype.handle=function(e){var t=this;return new Promise(function(r,n){var o=0;do{var i=t._handlerChain[o];try{var u=i(e);if("undefined"!=typeof u)return void(u instanceof Promise?u.then(function(e){r(e)},function(e){n(e)}):r(u))}catch(a){n(a)}}while(++o<t._handlerChain.length);n(new Error("No handler handled the interaction. Make sure that registerHandler is being called and that its returned subscription is not being disposed."))})},e}();t.ReactiveInteraction=o},,function(e,t,r){"use strict";function n(e,t){var r=e;return t&&(r=e.bind(t)),r}var o=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=r(3),u=r(2),a=r(19);Array.prototype.find||(Array.prototype.find=function(e){if(null===this)throw new TypeError("Array.prototype.find called on null or undefined");if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var t,r=Object(this),n=r.length>>>0,o=arguments[1],i=0;n>i;i++)if(t=r[i],e.call(o,t,i,r))return t}),Array.prototype.findIndex||(Array.prototype.findIndex=function(e){if(null===this)throw new TypeError("Array.prototype.findIndex called on null or undefined");if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var t,r=Object(this),n=r.length>>>0,o=arguments[1],i=0;n>i;i++)if(t=r[i],e.call(o,t,i,r))return i;return-1});var s=function(e){function t(t){e.call(this),this._changed=new u.Subject;var r=t?t.slice():[];Array.isArray(r)?this._array=r:this._array=r._array}return o(t,e),t.prototype.emitArrayChanges=function(e,t,r,n){if(t.length>0||n.length>0){var o=new a.CollectionChangedEventArgs(this);o.addedItems=t.slice(),o.addedItemsIndex=e,o.removedItems=n.slice(),o.removedItemsIndex=r,this._changed.next(o)}},Object.defineProperty(t.prototype,"changed",{get:function(){return this._changed.asObservable()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"itemsAdded",{get:function(){return this.changed.filter(function(e){return e.addedItems.length>0})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"itemsRemoved",{get:function(){return this.changed.filter(function(e){return e.removedItems.length>0})},enumerable:!0,configurable:!0}),t.prototype.getItem=function(e){return this._array[e]},t.prototype.setItem=function(e,t){this._array[e]=t},t.prototype.unshift=function(){for(var e=this,t=[],r=0;r<arguments.length;r++)t[r-0]=arguments[r];this.trackPropertyChanges("length",function(){(r=e._array).unshift.apply(r,t),e.emitArrayChanges(0,t,0,[]);var r})},t.prototype.shift=function(){var e=this;return this.trackPropertyChanges("length",function(){var t=e._array.shift();return"undefined"!=typeof t&&e.emitArrayChanges(0,[],0,[t]),t})},t.prototype.push=function(){for(var e=this,t=[],r=0;r<arguments.length;r++)t[r-0]=arguments[r];this.trackPropertyChanges("length",function(){(r=e._array).push.apply(r,t),e.emitArrayChanges(e._array.length-t.length,t,0,[]);var r})},t.prototype.pop=function(){var e=this;return this.trackPropertyChanges("length",function(){var t=e._array.pop();return"undefined"!=typeof t&&e.emitArrayChanges(0,[],e._array.length,[t]),t})},Object.defineProperty(t.prototype,"length",{get:function(){return this._array.length},enumerable:!0,configurable:!0}),t.prototype.slice=function(e,r){return new t(this._array.slice(e,r))},t.prototype.splice=function(e,r){for(var n=this,o=[],i=2;i<arguments.length;i++)o[i-2]=arguments[i];return this.trackPropertyChanges("length",function(){var i=(u=n._array).splice.apply(u,[e,r].concat(o));return n.emitArrayChanges(e,o,e,i),t.from(i);var u})},t.prototype.sort=function(e){var r=new t;return r._array=this._array.sort(e),r},t.prototype.map=function(e,r){var o=this,i=new t,u=n(e,r);return i._array=this._array.map(function(e,t,r){return u(e,t,o)}),i},t.prototype.filter=function(e,r){var o=this,i=new t,u=n(e,r);return i._array=this._array.filter(function(e,t,r){return u(e,t,o)}),i},t.prototype.indexOf=function(e,t){return this._array.indexOf(e,t)},t.prototype.lastIndexOf=function(e,t){return void 0===t&&(t=this.length-1),this._array.lastIndexOf(e,t)},t.prototype.forEach=function(e,t){var r=this,o=n(e,t);this._array.forEach(function(e,t,n){return o(e,t,r)})},t.prototype.reduce=function(e,t){var r=this;return"undefined"!=typeof t?this._array.reduce(function(t,n,o){return e(t,n,o,r)},t):this._array.reduce(function(t,n,o){return e(t,n,o,r)})},t.prototype.every=function(e,t){var r=this,o=n(e,t);return this._array.every(function(e,t,n){return o(e,t,r)})},t.prototype.some=function(e,t){var r=this,o=n(e,t);return this._array.some(function(e,t,n){return o(e,t,r)})},t.prototype.find=function(e,t){var r=this,o=n(e,t);return this._array.find(function(e,t,n){return o(e,t,r)})},t.prototype.findIndex=function(e,t){var r=this,o=n(e,t);return this._array.findIndex(function(e,t,n){return o(e,t,r)})},t.prototype.whenAnyItem=function(e){var t=this.derived.filter(function(e){return null!=e}).map(function(t){var r=t,n=r.whenAny(e);return n.publish().refCount()}).build();return t.toObservable().map(function(e){return u.Observable.merge.apply(u.Observable,e)})["switch"]().distinct()},t.prototype.whenAnyItemProperty=function(){var e=this.derived.filter(function(e){return null!=e}).map(function(e){var t=e,r=t.propertyChanged;return r.publish().refCount()}).build();return e.toObservable().map(function(e){return u.Observable.merge.apply(u.Observable,e)})["switch"]().distinct()},t.prototype.whenAnyItemValue=function(e){return this.whenAnyItem(e).map(function(e){return e.newPropertyValue})},t.prototype.whenAnyItemObservable=function(e){return this.whenAnyItemValue(e).filter(function(e){return null!=e}).mergeAll()},Object.defineProperty(t.prototype,"derived",{get:function(){return new l(this)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"computed",{get:function(){return new d(this)},enumerable:!0,configurable:!0}),t.from=function(e){return new t(e)},t.of=function(){for(var e=[],r=0;r<arguments.length;r++)e[r-0]=arguments[r];return t.from(e)},t.prototype.toArray=function(){return this._array.slice()},t.prototype.toObservable=function(){var e=this;return this.changed.map(function(t){return e.toArray()}).startWith(this.toArray()).publishReplay(1).refCount()},t.prototype.toJSON=function(){return this.map(function(e){return"undefined"==typeof e||null===e?null:"function"==typeof e.toJSON?e.toJSON():e}).toArray()},t.prototype.toString=function(){var e=this._array.map(function(e){var t=typeof e;return"undefined"===t?"undefined":null===e?"null":"string"===t?"'"+e+"'":e.toString()}).join(", ");return"["+e+"]"},t}(i.ReactiveObject);t.ReactiveArray=s;var c=function(e){function t(t,r,n,o){var i=this;e.call(this),this.parent=t,this.triggers=r,this.eventSteps=n,this.arraySteps=o,this._trackedItems=[];var s=new a.CollectionChangedEventArgs(this);s.addedItems=t.toArray(),s.addedItemsIndex=0,s.movedItems=[],s.removedItems=[],s.removedItemsIndex=0,this._apply(s),u.Observable.merge.apply(u.Observable,[t.changed].concat(r)).subscribe(function(e){i._apply(e)})}return o(t,e),t.prototype.splice=function(e,r){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];return t._throwNotSupported()},t.prototype.push=function(){for(var e=[],r=0;r<arguments.length;r++)e[r-0]=arguments[r];t._throwNotSupported()},t.prototype.pop=function(){return t._throwNotSupported()},t.prototype.shift=function(){return t._throwNotSupported()},t.prototype.unshift=function(){for(var e=[],r=0;r<arguments.length;r++)e[r-0]=arguments[r];return t._throwNotSupported()},t.prototype.setItem=function(e,r){t._throwNotSupported()},t._throwNotSupported=function(){throw new Error("Derived arrays do not support modification. If you want support for two-way derived arrays, file an issue at https://github.com/KallynGowdy/RxUI/issues.")},t.prototype._applyItem=function(e,t,r){for(var n={keep:!0,value:e},o=0;o<this.eventSteps.length&&(n=this.eventSteps[o].transform(n.value,t,r),n.keep!==!1);o++);return n},t.prototype._apply=function(r){for(var n=[],o=0;o<r.addedItems.length;o++){var i=r.addedItems[o],u=this._applyItem(i,o,r.addedItems);n.push(u)}var a=this._trackedItems;a.splice(r.removedItemsIndex,r.removedItems.length),a.splice.apply(a,[r.addedItemsIndex,0].concat(n));var s=a.filter(function(e){return e.keep}).map(function(e){return e.value}),c=t._transformArray(s,this.arraySteps);e.prototype.splice.apply(this,[0,this.length].concat(c))},t._transformArray=function(e,t){for(var r=e,n=0;n<t.length;n++)r=t[n].transform(r);return r},t}(s),p=function(){function e(e){this.predicate=e}return e.prototype.transform=function(e,t,r){return{value:e,keep:this.predicate(e,t,r)}},e}(),f=function(){function e(e){this.map=e}return e.prototype.transform=function(e,t,r){return{value:this.map(e,t,r),keep:!0}},e}(),h=function(){function e(e){this.compareFunction=e}return e.prototype.transform=function(e){return e.sort(this.compareFunction)},e}(),l=function(){function e(e){this.parent=e,this.eventSteps=[],this.arraySteps=[],this.triggers=[]}return e.prototype.addEvent=function(e){return this.eventSteps.push(e),this},e.prototype.addArray=function(e){return this.arraySteps.push(e),this},e.prototype.whenAnyItem=function(){for(var e=this,t=[],r=0;r<arguments.length;r++)t[r-0]=arguments[r];var n=u.Observable.merge.apply(u.Observable,t.map(function(t){return e.parent.whenAnyItem(t).map(function(t){return{sender:t.sender,propertyName:t.propertyName,newPropertyValue:t.newPropertyValue,index:e.parent.indexOf(t.sender)}})})),o=n.map(function(t){var r=new a.CollectionChangedEventArgs(e);return r.addedItems=[t.sender],r.addedItemsIndex=t.index,r.removedItems=[t.sender],r.removedItemsIndex=t.index,r});return this.triggers.push(o),this},e.prototype.whenAnyItemProperty=function(){var e=this,t=this.parent.whenAnyItemProperty().map(function(t){return{sender:t.sender,propertyName:t.propertyName,newPropertyValue:t.newPropertyValue,index:e.parent.indexOf(t.sender)}}),r=t.map(function(t){var r=new a.CollectionChangedEventArgs(e);return r.addedItems=[t.sender],r.addedItemsIndex=t.index,r.removedItems=[t.sender],r.removedItemsIndex=t.index,r});return this.triggers.push(r),this},e.prototype.filter=function(e){return this.addEvent(new p(e))},e.prototype.map=function(e){return this.addEvent(new f(e))},e.prototype.sort=function(e){return this.addArray(new h(e))},e.prototype.build=function(){return new c(this.parent,this.triggers,this.eventSteps,this.arraySteps)},e}();t.DerivedReactiveArrayBuilder=l;var d=function(){function e(e){this.parent=e}return e.prototype.reduce=function(e,t){var r=this;return this.parent.toObservable().map(function(n){return n.reduce(function(t,n,o,i){return e(t,n,o,r.parent)},t)})},e.prototype.every=function(e,t){var r=this,o=n(e,t);return this.parent.toObservable().map(function(e){return e.every(function(e,t,n){return o(e,t,r.parent)})})},e.prototype.some=function(e,t){var r=this,o=n(e,t);return this.parent.toObservable().map(function(e){return e.some(function(e,t,n){return o(e,t,r.parent)})})},e.prototype.find=function(e,t){var r=this,o=n(e,t);return this.parent.toObservable().map(function(e){return e.find(function(e,t,n){return o(e,t,r.parent)})})},e.prototype.findIndex=function(e,t){var r=this,o=n(e,t);return this.parent.toObservable().map(function(e){return e.findIndex(function(e,t,n){return o(e,t,r.parent)})})},e}();t.ComputedReactiveArrayBuilder=d},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},o=r(5),i=function(e){function t(t){e.call(this,t),this.addedItems=[],this.addedItemsIndex=-1,this.removedItems=[],this.removedItemsIndex=-1,this.movedItems=[]}return n(t,e),t}(o.EventArgs);t.CollectionChangedEventArgs=i},function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},o=r(5),i=function(e){function t(t,r,n){e.call(this,t),this.beforeIndex=r,this.afterIndex=n}return n(t,e),Object.defineProperty(t.prototype,"item",{get:function(){return this.sender},enumerable:!0,configurable:!0}),t}(o.EventArgs);t.MovedItemEventArgs=i}])});